<div class="row">
    <div class="col-sm-2">
        <app-side-nav></app-side-nav>
    </div>
    <div class="col-sm-10 ps-3 mt-2">
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" style="margin: 20px 0 5px 40px;">
            <img src=" ../../assets/Icon/Dashboard/handshake_FILL0_wght400_GRAD0_opsz48.png " alt="Bootstrap "
            width="20 " height="20 " />
    Add Agreement
  </button>

        <!-- Modal edit -->
        <div class="modal fade" id="exampleModalE" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Service Agreement Edit</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="refreshPage()"></button>
                    </div>
                    <div class="modal-body">
                        <form>

                            <div>
                                <h3 class="h6 mb-4 ">Basic information of Service Agreement</h3>
                            </div>

                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <label>Unit No</label>
                                        <br />

                                        <select class="form-control " [(ngModel)]="unitid " [ngModelOptions]="{ standalone: true } " id="unitid ">
                                            <option>choose an existing unit...</option>
                                            <option *ngFor="let item of UnitArray" [value]="item.id">{{ item.id }}</option>
                                            
                                        </select>
                                        <br />

                                        <!-- <label>Item Name</label>
                                        <br />

                                        <select class="form-control " [(ngModel)]="item " [ngModelOptions]="{ standalone: true } " id="item ">
                                            <option>choose an existing item...</option>
                                            <option *ngFor="let item of UnitArray" [value]="item.item_name">{{ item.item_name }}</option>
                                            
                                        </select>
                                        <br /> -->

                                        <label>Description</label>
                                        <br />
                                        <textarea type="text " [(ngModel)]="equipment " [ngModelOptions]="{ standalone: true } " class="form-control " id="equipment " placeholder="Enter Description(equipments)"></textarea> <br />

                                        <label>Price per service</label>
                                        <br />
                                        <input type="text " [(ngModel)]="price_per_service " [ngModelOptions]="{ standalone: true } " class="form-control " id="price_per_service " placeholder="Enter price per service " />
                                        <br />
                                        <label>Emergency service rate</label>
                                        <br />
                                        <input type="text " [(ngModel)]="emergency_service_rate " [ngModelOptions]="{ standalone: true } " class="form-control " id="emergency_service_rate " placeholder="Enter emergency service rate " /> <br />



                                    </div>

                                </div>

                                <div class="col-lg-6">
                                    <div class="mb-3">


                                        <label>Type of the service</label>
                                        <br />
                                        <select class="form-control " [(ngModel)]="type_of_the_service " [ngModelOptions]="{ standalone: true } " id="type_of_the_service ">
                                            <option>Monthly</option>
                                            <option>Quarterly</option>
                                            <option>Halfyearly</option>
                                            <option>Yearly</option>
                                        </select>
                                        <br />
                                        <label>Initiated date</label>
                                        <br />
                                        <input type="date" [(ngModel)]="initiated_date " [ngModelOptions]="{ standalone: true } " class="form-control " id="date " placeholder="Enter initiated date " /> <br />

                                        <label>Expired date</label>
                                        <br />
                                        <input type="date" [(ngModel)]="expired_date " [ngModelOptions]="{ standalone: true } " class="form-control " id="expired_date " placeholder="Enter expired date " />
                                        <br />
                                        <label>Customer_NIC</label>
                                        <br />
                                        <select class="form-control " [(ngModel)]="nic " [ngModelOptions]="{ standalone: true } " id="nic ">
                                            <option>choose an existing customer...</option>
                                            <option *ngFor="let item of CustomerArray" [value]="item.nic_number">{{item.nic_number}}-{{item.name}}</option>
                                            
                                        </select>
                                        <br />
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="refreshPage()">Close</button>
                        <button type="button" class="btn btn-primary" (click)="save() ">Save changes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Service Agreement Registration</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="refreshPage()"></button>
                    </div>
                    <div class="modal-body">
                        <form>

                            <div>
                                <h3 class="h6 mb-4 ">Basic information of Service Agreement</h3>
                            </div>

                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <label>Unit No</label>
                                        <br />

                                        <select class="form-control " [(ngModel)]="unitid " [ngModelOptions]="{ standalone: true } " id="unitid ">
                                            <option>choose an existing unit...</option>
                                            <option *ngFor="let item of UnitArray" [value]="item.id">{{ item.id }}</option>
                                            
                                        </select>
                                        <br />

                                        <!-- <label>Item Name</label>
                                        <br />

                                        <select class="form-control " [(ngModel)]="item " [ngModelOptions]="{ standalone: true } " id="item ">
                                            <option>choose an existing item...</option>
                                            <option *ngFor="let item of UnitArray" [value]="item.item_name">{{ item.item_name }}</option>
                                            
                                        </select>
                                        <br /> -->
                                        <label>Description</label>
                                        <br />
                                        <textarea type="text " [(ngModel)]="equipment " [ngModelOptions]="{ standalone: true } " class="form-control " id="equipment " placeholder="Enter Description(equipments) "></textarea> <br />

                                        <label>Price per service</label>
                                        <br />
                                        <input type="text " [(ngModel)]="price_per_service " [ngModelOptions]="{ standalone: true } " class="form-control " id="price_per_service " placeholder="Enter price per service " />
                                        <br />
                                        <label>Emergency service rate</label>
                                        <br />
                                        <input type="text " [(ngModel)]="emergency_service_rate " [ngModelOptions]="{ standalone: true } " class="form-control " id="emergency_service_rate " placeholder="Enter emergency service rate " /> <br />



                                    </div>

                                </div>

                                <div class="col-lg-6">
                                    <div class="mb-3">


                                        <label>Type of the service</label>
                                        <br />
                                        <select class="form-control " [(ngModel)]="type_of_the_service " [ngModelOptions]="{ standalone: true } " id="type_of_the_service ">
                                            <option>Monthly</option>
                                            <option>Quarterly</option>
                                            <option>Halfyearly</option>
                                            <option>Yearly</option>
                                        </select>
                                        <br />
                                        <label>Initiated date</label>
                                        <br />
                                        <input type="date" [(ngModel)]="initiated_date " [ngModelOptions]="{ standalone: true } " class="form-control " id="date " placeholder="Enter initiated date " /> <br />

                                        <label>Expired date</label>
                                        <br />
                                        <input type="date" [(ngModel)]="expired_date " [ngModelOptions]="{ standalone: true } " class="form-control " id="expired_date " placeholder="Enter expired date " />
                                        <br />
                                        <label>Customer_NIC</label>
                                        <br />
                                        <select class="form-control " [(ngModel)]="nic " [ngModelOptions]="{ standalone: true } " id="nic ">
                                            <option>choose an existing customer...</option>
                                            <option *ngFor="let item of CustomerArray" [value]="item.nic_number">{{item.nic_number}}-{{item.name}}</option>
                                            
                                        </select>
                                        <br />
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="refreshPage()">Close</button>
                        <button type="button" class="btn btn-primary" (click)="save() ">Save changes</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="tabel-containt " id="main-container " style="margin: 0px 20px 70px 40px;">
            <table datatable [dtTrigger]=" dtTriger " [dtOptions]="dtoptions " class="table align-middle mb-0 bg-white ">
                <thead class="bg-light ">
                    <tr>
                        <!-- <th scope="col ">AgreementID</th>
                        <th scope="col ">UnitID</th> -->
                        <!-- <th scope="col ">UnitName</th> -->
                        <th>Customer NIC</th>
                        <th>Item Name</th>
                        <th>ServicePrice</th>
                        <th>Emergency Price Rate</th>
                        <th>Service Type</th>
                        <th>Initiated Date</th>
                        <th>Expired Date</th>
                        <th>delete</th>
                        <th>edit</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let AgreementItem of AgreementArray ">
                        <!-- <th scope="row ">{{ AgreementItem.agreementid }}</th>
                        <td>{{ AgreementItem.unitid }}</td> -->
                        <td>{{ AgreementItem.nic }}</td>
                        <td>{{ AgreementItem.item }}</td>
                        <td>{{ AgreementItem.price_per_service }}</td>
                        <td>{{ AgreementItem.emergency_service_rate }}</td>
                        <td>{{ AgreementItem.type_of_the_service }}</td>
                        <td>{{ AgreementItem.initiated_date }}</td>
                        <td>{{ AgreementItem.expired_date }}</td>
                        <!-- <td>{{ AgreementItem.nic }}</td> -->

                        <td>
                            <button type=" button " class="btn btn-link btn-sm btn-rounded " (click)="setDelete(AgreementItem) ">
                                <img src="../../assets/Icon/Customer/delete_FILL0_wght400_GRAD0_opsz48.png "
                                    alt="Bootstrap " width="20 " height="20 " />
                            </button>
                        </td>
                        <td>



                            <button type="button " class="btn btn-outline-primary " data-bs-toggle="modal" data-bs-target="#exampleModalE" (click)="setUpdate(AgreementItem) ">
                                <img src=" ../../assets/Icon/Customer/edit_FILL0_wght400_GRAD0_opsz48.png " alt="Bootstrap "
                                    width="20 " height="20 " />
                            </button>


                        </td>



                        <!--
                        <td><button *ngIf="showMe " class="btn btn-outline-primary " onClick="history.go(0); ">
                            <img
                              src="../../assets/Icon/Customer/saveIcon.gif "
                              alt="Bootstrap "
                              width="20 "
                              height="20 "
                            />
                          </button>
                        </td>
                    -->

                    </tr>
                </tbody>
            </table>



            <div *ngIf="!isResultLoaded " class=" col-lg-12 col-md-12 col-xl-12 ">
                <div class="alert alert-info " role="alert ">
                    <h4 class="alert-heading ">NO Agreements!</h4>
                    <p>No Agreements were found.</p>
                </div>
            </div>

        </div>

    </div>
</div>